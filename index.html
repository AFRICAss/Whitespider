<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="icon" type="image/x-icon" href="favicon.ico" />
		<title>Unblocker!</title>
		<style type="text/css">
* {
	margin: 0px;
	padding: 0px;
}

body {
	position: absolute;
	display: block;
	width: 100%;
	height: 100%;
	font-size: 14px;
	font-family: monospace;
	font-weight: 500;
	overflow-x: hidden;
}

#main-screen, #noscript-screen {
	position: absolute;
	width: 100%;
	height: 100%;
	left: 0px;
	top: 0px;
	right: 0px;
	bottom: 0px;
	color: #000000;
	background-color: #ffffff;
}

#noscript-screen {
	padding: 10px;
	box-sizing: border-box;
}

#container {
	position: absolute;
	display: block;
	width: 512px;
	height: 384px;
	left: 50%;
	top: 50%;
	margin-left: -256px;
	margin-top: -192px;
}

#title {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
	margin-bottom: 20px;
	white-space: pre;
	font-size: 12px;
	font-style: normal;
	line-height: 12px;
}

#input {
	position: relative;
	display: block;
	width: calc(100% - 52px);
	height: 25px;
	outline: none;
	margin-top: 20px;
	margin-bottom: 20px;
	padding-top: 10px;
	padding-bottom: 10px;
	padding-left: 25px;
	padding-right: 25px;
	font-size: 16px;
	font-weight: 500;
	border-style: solid;
	border-width: 1px;
	border-color: #b0b0b0;
	border-radius: 25px;
}

#input:focus {
	border-color: #808080;
}

#button-bar {
	position: relative;
	display: flex;
	width: fit-content;
	height: fit-content;
	margin: auto;
}

#button-bar div {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	padding: 10px;
	cursor: pointer;
	margin-left: 10px;
	margin-right: 10px;
	color: #000000;
	background-color: #c0c0c0;
	font-size: 12px;
	border-style: solid;
	border-width: 1px;
	border-top-color: #f0f0f0;
	border-left-color: #f0f0f0;
	border-bottom-color: #101010;
	border-right-color: #101010;	
}

#button-bar div:active {
	border-top-color: #101010;
	border-left-color: #101010;
	border-bottom-color: #f0f0f0;
	border-right-color: #f0f0f0;
}

.notice {
	position: relative;
	display: block;
	width: 100%;
	height: fit-content;
	margin-top: 15px;
	font-size: 12px;
	text-align: center;
}

#footer {
	position: absolute;
	display: block;
	width: 100%;
	height: 30px;
	bottom: 0px;
	line-height: 30px;
	font-size: 12px;
	font-family: monospace;
	font-weight: 500;
	text-align: center;
	color: #808080;
	background-color: #f0f0f0;
}
		</style>
	</head>
	<body>
		<div id="main-screen">
			<div id="container">
				<div id="title">
 _    _         _      _               _
| |  | |       | |    | |             | |
| |  | | _ __  | |__  | |  ___    ___ | | __ ___  _ __
| |  | || '_ \ | '_ \ | | / _ \  / __|| |/ // _ \| '__|
| |__| || | | || |_) || || (_) || (__ |   &#60;|  __/| |
 \____/ |_| |_||_.__/ |_| \___/  \___||_|\_\\___||_|
				</div>
				<input id="input" type="text" placeholder="Search or type a URL" />
				<div id="button-bar">
					<div id="search-button">Unblocked Search</div>
					<div id="random-button">I'm Feeling Lucky</div>
				</div>
				<div class="notice">Security notice: Your activity on this site will be encrypted through a proxy server.</div>
				<div class="notice">For the best performance, we strongly recommend you to use Google Chrome or a Chromium-based browser.</div>
			</div>
		</div>
		<div id="footer">Created by Ruochen Jia -- <a href="https://github.com/ruochenjia/unblocker/">GitHub Project</a></div>
		<noscript>
			<div id="noscript-screen">Please enable JavaScript and refresh this page to continue.</div>
		</noscript>
		<script type="text/javascript" src="uv/uv.config.js"></script>
		<script type="text/javascript">
"use strict";

// <![CDATA[
(() => {

window.onerror = (msg, src, lineno, colno, err) => {
	alert(msg, "Error", "images/error.png");
};

let urlInput = document.getElementById("input");
urlInput.onkeydown = (e) => {
	if (e.keyCode == 13)
		run(false);
};
document.getElementById("search-button").onclick = () => {
	run(true);
};

function getQueryString(name, fallback = null, url = window.location.href) {
	name = name.replace(/[\[\]]/g, '\\$&');
	let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
	let results = regex.exec(url);
	if (results == null)
		return fallback;
	if (results[2] == null)
		return "";
	return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

function isUrl(str) {
	try {
		let url = new URL(str);
		return url.href;
	} catch(err) {
		return null;
	}
}

function isHostname(str = "") {
	if (/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^(?:(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){6})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:::(?:(?:(?:[0-9a-fA-F]{1,4})):){5})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){4})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,1}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){3})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,2}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){2})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,3}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:[0-9a-fA-F]{1,4})):)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,4}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,5}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,6}(?:(?:[0-9a-fA-F]{1,4})))?::))))$/.test(str)) {
		return str.includes(".") || str == "localhost";
	}
	return false;
}

function encodeUrl(url) {
	let eurl = __uv$config.encodeUrl(url);
	let base = new URL(window.location.href);
	base.pathname = "/";
	base = base.href.slice(0, -1);
	return base +  __uv$config.prefix + eurl;
}

function fixUrl(url, searchOnly) {
	url = url.replace(/^\s+|\s+$/gm, "");

	if (searchOnly)
		return "https://www.google.com/search?q=" + url;
	if (isUrl(url))
		return url;
	if (isHostname(url))
		return "https://" + url;

	return "https://www.google.com/search?q=" + url;
}

function run(searchOnly) {
	let url = fixUrl(urlInput.value, searchOnly);

	window.navigator.serviceWorker.register("./sw.js", {
    	scope:  __uv$config.prefix
	}).then(() => {
		window.location = new URL(encodeUrl(url));
	}).catch((err) => {	
		console.warn(err);
	});
}

})();
// ]]>
		</script>
	</body>
</html>